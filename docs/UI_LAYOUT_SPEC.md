# UI Layout Specification - Editor

## Full Page Layout - Modern & Creative Design

**Design Improvements:**
- Sticky header with gradient background (blue-600 â†’ purple-600)
- Program Selector in card with icons (ğŸ¯ ğŸ›£ï¸ ğŸ“‹)
- Sticky section navigation with animated progress bar
- Centered editor area (max-width 1200px) with generous padding
- Card-based design with subtle shadows and gradient borders
- Modern action buttons with icons and hover effects
- Collapsible panels with smooth animations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HEADER                                                                       â”‚
â”‚ Business Plan Editor  [ğŸ“‹ Requirements] [ğŸ’¬ AI Assistant]  [ğŸ‘ï¸ Preview]    â”‚
â”‚                                                                              â”‚
â”‚ â”Œâ”€ Program Selector â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Product: [Strategy â–¼]  Route: [Grant â–¼]  Program: [FFG Basisprogramm â–¼]â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SECTION NAVIGATION                                                           â”‚
â”‚ [â†] [01 âœ“ Executive] [02 âš  Market] [03 â—‹ Project] ... [â†’]                 â”‚
â”‚                                                                              â”‚
â”‚ Overall Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 45% Complete (3 of 9 sections)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MAIN EDITOR AREA                                                             â”‚
â”‚                                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â”Œâ”€ Section Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚                                                                     â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ Market Opportunity                                                  â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ Describe the market size, trends, and customer segments.           â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                                                                     â”‚ â”‚ â”‚

â”‚ â”‚ â”Œâ”€ Text Editor â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚                                                                   â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ [Rich text editor with formatting toolbar]                       â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                                                                   â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ Start writing...                                                 â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                                                                   â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚ [âœ¨ Generate with AI]  [ğŸ’¡ Smart Hints]  [â­ï¸ Skip]                    â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚ â”Œâ”€ ğŸ’¡ Smart Hints (Collapsible) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ ğŸ’¡ Question 1                                                     â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ ğŸ’¡ Question 2                                                     â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ [Use as Guide]                                                   â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚ â”Œâ”€ ğŸ“Š Tables & Charts (If Needed) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚                                                                   â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ Navigation: [â† Previous]  [Table 1 of 3]  [Next â†’]               â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                                                                   â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”Œâ”€ Revenue Table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ [Table content - editable]                                   â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ Connected to text: "Our revenue projections show..."        â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ [âœ¨ Fill with AI from Text] [Edit] [Delete]                 â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                                                                   â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ All Tables: [Revenue] [Costs] [Cash Flow]  â† Click to jump      â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                                                                   â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ [ğŸ“Š Add Table] [ğŸ“ˆ Add Chart] [ğŸ“· Add Image]                    â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Main Editor Area - Detailed

### 1. Section Header (Improved Visual Design)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚ Market Opportunity                                                      â”‚ â”‚
â”‚ â”‚ Describe the market size, trends, and customer segments.              â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Visual Design:**
- **Card-style container** with subtle border and shadow
- **Section title** - Large, bold, prominent (text-2xl, font-bold)
- **Section description** - Gray text, readable (text-gray-600)
- **Spacing** - Generous padding, clean separation
- **Background** - Slight background color (bg-gray-50 or bg-white with border)

**Components:**
- Section title (h1, large, bold, text-gray-900)
- Section description (paragraph, gray text, text-gray-600)
- Card container with border and subtle shadow

**Note:** Section navigation is handled by the top navigation bar (section tabs). No need for duplicate navigation here.

---

## Questions & Prompts: How They Work

### Where Do Questions Come From?

**Source:** Questions come from `sectionTemplate.prompts` in `shared/templates/sections.ts`

**Example:**
```typescript
{
  id: 'market_opportunity',
  title: 'Market Opportunity',
  description: 'Describe the market size, trends, and customer segments.',
  prompts: [
    'Who is the target market?',
    'How large is the market?',
    'What trends support your opportunity?',
    'What unmet needs exist?'
  ]
}
```

**How They're Used:**
- Questions are **OPTIONAL guidance**, not required
- Shown in **ğŸ’¡ Smart Hints panel** (collapsible)
- User can use them as inspiration or ignore them
- AI uses ALL prompts as context when generating content

### What If User Skips Questions?

**Questions are OPTIONAL - User can skip them entirely!**

**Flow:**
1. User opens section â†’ Questions appear in Smart Hints panel (if section has prompts)
2. User can:
   - **Option A:** Use questions as guide â†’ Write text manually
   - **Option B:** Ignore questions â†’ Write text freely
   - **Option C:** Click "âœ¨ Generate with AI" â†’ AI uses ALL prompts as context

**What "Generate with AI" Does:**
- **If user skips questions:** AI generates content for the **entire section** using:
  - All prompts from `sectionTemplate.prompts` (as context)
  - Section description
  - Previous sections' content (cross-section awareness)
  - Conversation history
  - Program requirements
  
- **If user uses questions:** Same behavior - AI still uses ALL prompts as context, not just one question

**Key Point:** Questions are **guidance**, not a required mode. AI always generates for the whole section, using all prompts as context.

---

## AI Generation: How It Works

### What Happens When User Clicks "âœ¨ Generate with AI"

**Step 1: AI Gathers Context**
```
AI collects:
1. Section title and description
2. ALL prompts from sectionTemplate.prompts (even if user skipped them)
3. Previous sections' content (cross-section awareness)
4. Conversation history for this section
5. Program-specific requirements
6. Template knowledge (best practices, frameworks)
```

**Step 2: AI Generates Content**
```
AI generates:
- Complete section content (not just one question answer)
- Uses all prompts as context to create comprehensive content
- Follows section description and requirements
- Maintains consistency with previous sections
```

**Step 3: Content Appears in Editor**
```
Generated content appears in text editor
  â†“
User can edit, refine, or regenerate
  â†“
If section needs tables â†’ Tables section appears below
```

**Example Flow:**
```
User opens "Market Opportunity" section
  â†“
Smart Hints shows: "Who is target market?", "How large is market?", etc.
  â†“
User clicks "âœ¨ Generate with AI" (without using questions)
  â†“
AI uses ALL prompts as context:
  - "Who is the target market?" â†’ AI includes target market info
  - "How large is the market?" â†’ AI includes market size
  - "What trends support your opportunity?" â†’ AI includes trends
  - "What unmet needs exist?" â†’ AI includes unmet needs
  â†“
AI generates complete section covering all aspects
  â†“
Content appears in editor
```

---

## Contextual Memory: How Sections Connect

### Cross-Section Awareness

**AI has memory across sections:**

1. **Previous Sections' Content**
   - AI reads snippets from all completed sections
   - Uses this to maintain consistency
   - Example: If Executive Summary mentions "â‚¬500K funding", Financial section will reference it

2. **Conversation History**
   - Each section has its own conversation history
   - AI remembers previous generations and edits
   - Allows iterative refinement

3. **Program Requirements**
   - AI knows the selected program (FFG, AWS, etc.)
   - Uses program-specific guidance and requirements
   - Adapts content to program expectations

### Suggested Section Order

**Sections have an `order` field in templates. Recommended flow:**

```
1. Executive Summary (order: 1)
   â†’ High-level overview, sets context
   
2. Market Opportunity (order: 2)
   â†’ Market analysis, customer segments
   â†’ May need: Competitor table (optional)
   
3. Business Model (order: 3)
   â†’ Revenue streams, value proposition
   
4. Competitive Landscape (order: 4)
   â†’ Competitors, differentiation
   
5. Project Description (order: 5)
   â†’ Project goals, milestones
   â†’ ALWAYS needs: Milestone table â†’ Gantt chart
   
6. Financial Overview (order: 6)
   â†’ Revenue, costs, funding needs
   â†’ ALWAYS needs: Revenue table, Costs table, Cash Flow table
   
7. Risk Assessment (order: 7)
   â†’ Risks, mitigation strategies
   â†’ ALWAYS needs: Risk matrix
   
8. Team & Qualifications (order: 8)
   â†’ Team members, hiring plan
   â†’ May need: Hiring timeline (optional)
```

**Why This Order?**
- Each section builds on previous ones
- Market â†’ Business Model â†’ Financial (logical flow)
- Executive Summary first (overview)
- Financial and Risk last (detailed planning)

**AI Uses This Order:**
- When generating content, AI references previous sections
- Maintains consistency across the plan
- Builds a coherent narrative

---

## Section-Specific Data Needs: Unified Flow

### How Different Sections Handle Data

**Based on `section.category`:**

| Category | Always Needs Tables? | Typical Tables | Chart Type | Example Section |
|----------|---------------------|----------------|------------|-----------------|
| `financial` | **YES** | Revenue, Costs, Cash Flow | Bar/Line Chart | Preliminary Financial Overview |
| `risk` | **YES** | Risk Matrix | Matrix/Heatmap | Risk Assessment |
| `project` | **YES** | Milestones, Timeline | Gantt Chart | Project Description |
| `market` | **MAYBE** | Competitor Analysis (optional) | Pie Chart | Market Opportunity |
| `team` | **MAYBE** | Hiring Timeline (optional) | Line Chart | Team & Qualifications |
| `general` | **NO** | None | None | Executive Summary |

### Unified Flow for All Sections - Detailed Step-by-Step

**Universal Pattern with User Experience:**

#### STEP 1: USER OPENS SECTION

**What User Sees:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Section Header (Card)                                        â”‚
â”‚ Market Opportunity                                           â”‚
â”‚ Describe the market size, trends, and customer segments.    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Text Editor (Empty)                                         â”‚
â”‚ [Rich text editor with toolbar]                             â”‚
â”‚ Start writing...                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[âœ¨ Generate with AI]  [ğŸ’¡ Smart Hints]  [â­ï¸ Skip]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¡ Smart Hints (Collapsed by default)                       â”‚
â”‚ [Expand â–¼]                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**What Happens:**
- Section loads with title and description
- Text editor is empty (or shows existing content if previously edited)
- Smart Hints panel is collapsed (user can expand to see questions)
- **Tables & Charts section is NOT visible yet** (waiting for Step 3 check)

---

#### STEP 2: USER WRITES TEXT OR GENERATES WITH AI

**Option A: User Writes Manually**
```
User types in text editor:
"Our target market consists of small businesses in Austria..."
  â†“
Text saved to: section.content (auto-saves as user types)
```

**Option B: User Clicks "âœ¨ Generate with AI"**
```
User clicks "âœ¨ Generate with AI"
  â†“
Loading indicator appears: "Generating content..."
  â†“
AI gathers context:
  - All prompts from sectionTemplate.prompts
  - Previous sections' content
  - Program requirements
  - Template knowledge
  â†“
AI generates complete section content
  â†“
Content appears in editor (user can edit)
  â†“
Text saved to: section.content
```

**What User Sees After Generation:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Text Editor (Filled)                                        â”‚
â”‚ Our target market consists of small businesses in Austria.  â”‚
â”‚ The market size is estimated at â‚¬50 million...              â”‚
â”‚ [User can edit this content]                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### STEP 3: CHECK IF SECTION NEEDS TABLES

**What Happens (Behind the Scenes):**
```
System checks: section.category

If category = 'financial':
  â†’ Show Tables & Charts section (always)
  â†’ Show helpful message: "This section typically includes financial tables"

If category = 'risk':
  â†’ Show Tables & Charts section (always)
  â†’ Show helpful message: "This section typically includes a risk matrix"

If category = 'project':
  â†’ Show Tables & Charts section (always)
  â†’ Show helpful message: "This section typically includes milestone timelines"

If category = 'market':
  â†’ Show Tables & Charts section (optional)
  â†’ Show helpful message: "You can optionally add competitor analysis tables"

If category = 'team':
  â†’ Show Tables & Charts section (optional)
  â†’ Show helpful message: "You can optionally add hiring timeline tables"

If category = 'general':
  â†’ Do NOT show Tables & Charts section
  â†’ Section is text-only
```

---

#### STEP 4: TABLES & CHARTS SECTION APPEARS

**What User Sees (If Section Needs Tables):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Tables & Charts                                           â”‚
â”‚                                                             â”‚
â”‚ ğŸ’¡ This section typically includes financial tables.        â”‚
â”‚    Create tables to visualize your data.                   â”‚
â”‚                                                             â”‚
â”‚ [ğŸ“Š Add Table] [ğŸ“ˆ Add Chart] [ğŸ“· Add Image]                 â”‚
â”‚                                                             â”‚
â”‚ (No tables created yet)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**What User Sees (If Section is Optional for Tables):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Tables & Charts (Optional)                               â”‚
â”‚                                                             â”‚
â”‚ ğŸ’¡ You can optionally add competitor analysis tables.       â”‚
â”‚    Tables help visualize market data.                      â”‚
â”‚                                                             â”‚
â”‚ [ğŸ“Š Add Table] [ğŸ“ˆ Add Chart] [ğŸ“· Add Image]                 â”‚
â”‚                                                             â”‚
â”‚ (No tables created yet - optional)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Points:**
- Section appears **immediately** when section loads (if category requires it)
- OR appears **after user writes text** (for optional categories)
- Shows helpful description explaining why tables might be useful
- User can ignore this section if they don't want tables

---

#### STEP 5: USER CREATES TABLE

**What Happens When User Clicks "ğŸ“Š Add Table":**

```
User clicks "ğŸ“Š Add Table"
  â†“
Table Creation Dialog Opens:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create New Table                                             â”‚
â”‚                                                             â”‚
â”‚ Table Name: [Revenue Projections        ]                   â”‚
â”‚                                                             â”‚
â”‚ Table Type: [Financial Data â–¼]                             â”‚
â”‚   Options: Financial Data, Risk Matrix, Milestones,        â”‚
â”‚            Competitor Analysis, Custom                      â”‚
â”‚                                                             â”‚
â”‚ Time Period: [Years â–¼]                                      â”‚
â”‚   Options: Years, Quarters, Months                          â”‚
â”‚                                                             â”‚
â”‚ Number of Periods: [3]                                     â”‚
â”‚                                                             â”‚
â”‚ Structure:                                                  â”‚
â”‚   â˜‘ Include KPIs (for financial tables)                    â”‚
â”‚   â˜‘ Include Totals                                          â”‚
â”‚                                                             â”‚
â”‚ [Create Table] [Cancel]                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
User fills in details and clicks "Create Table"
  â†“
Empty table structure appears:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Tables & Charts                                           â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ Revenue Projections â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚ â”‚ â”‚ Item        â”‚ Year 1  â”‚ Year 2  â”‚ Year 3  â”‚        â”‚ â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚ â”‚
â”‚ â”‚ â”‚ [Product A] â”‚ [    ]  â”‚ [    ]  â”‚ [    ]  â”‚        â”‚ â”‚
â”‚ â”‚ â”‚ [Product B] â”‚ [    ]  â”‚ [    ]  â”‚ [    ]  â”‚        â”‚ â”‚
â”‚ â”‚ â”‚ [Total]     â”‚ [    ]  â”‚ [    ]  â”‚ [    ]  â”‚        â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ [âœ¨ Fill with AI from Text] [Edit Structure] [Delete] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**About KPIs:**
- For **Financial tables**: User can check "Include KPIs" option
- KPIs are calculated automatically (e.g., Revenue Growth %, Profit Margin %)
- KPIs appear as additional rows or columns in the table
- Example: If Revenue table has KPIs, it shows:
  ```
  Revenue Growth %: [Year 1: N/A] [Year 2: 60%] [Year 3: 50%]
  ```

---

#### STEP 6: AI FILLS TABLE FROM TEXT (Safe & Clear Process)

**What Happens When User Clicks "âœ¨ Fill with AI from Text":**

```
User clicks "âœ¨ Fill with AI from Text" on table
  â†“
Confirmation Dialog Appears (SAFETY):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fill Table with AI                                          â”‚
â”‚                                                             â”‚
â”‚ AI will read your text and extract relevant data to fill    â”‚
â”‚ this table.                                                â”‚
â”‚                                                             â”‚
â”‚ Text to analyze:                                            â”‚
â”‚ "Our revenue projections show strong growth over the next   â”‚
â”‚ 3 years. We expect to reach â‚¬500,000 in Year 1, growing   â”‚
â”‚ to â‚¬1.2 million by Year 3..."                              â”‚
â”‚                                                             â”‚
â”‚ âš ï¸ Note: This will overwrite any existing data in the table. â”‚
â”‚                                                             â”‚
â”‚ [Fill Table] [Cancel]                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
User clicks "Fill Table"
  â†“
Loading indicator: "AI is analyzing your text and extracting data..."
  â†“
AI Process:
  1. Reads section.content
  2. Identifies relevant data (numbers, dates, categories)
  3. Matches data to table structure
  4. Fills table cells
  5. Calculates KPIs (if enabled)
  â†“
Table Updates:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€ Revenue Projections â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚ â”‚ â”‚ Item        â”‚ Year 1  â”‚ Year 2  â”‚ Year 3  â”‚        â”‚ â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚ â”‚
â”‚ â”‚ â”‚ Product A   â”‚ 300,000 â”‚ 600,000 â”‚ 900,000 â”‚        â”‚ â”‚
â”‚ â”‚ â”‚ Product B   â”‚ 200,000 â”‚ 400,000 â”‚ 300,000 â”‚        â”‚ â”‚
â”‚ â”‚ â”‚ Total       â”‚ 500,000 â”‚ 800,000 â”‚ 1,200,000â”‚       â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ KPIs:                                                   â”‚
â”‚ â”‚ Revenue Growth %: [N/A] [60%] [50%]                   â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ [âœ¨ Regenerate from Text] [Edit] [Delete]              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Safety Features:**
- Confirmation dialog before overwriting
- Shows preview of text being analyzed
- User can cancel if not sure
- User can manually edit table after AI fills it
- User can regenerate if text changes

---

#### STEP 7: CHART AUTO-GENERATES (With Full Editing)

**What Happens Automatically:**

```
Table has data â†’ Chart automatically appears below table
  â†“
Chart generates based on table type:
  - Financial tables â†’ Bar/Line charts
  - Risk matrix â†’ Matrix/Heatmap visualization
  - Milestones â†’ Gantt chart
  - Competitor data â†’ Pie/Bar charts
```

**What User Sees:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€ Revenue Projections Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ [Bar Chart Visualization]                              â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚     â”‚                                                    â”‚ â”‚
â”‚ â”‚ 1.2Mâ”‚     â–ˆâ–ˆâ–ˆâ–ˆ                                          â”‚ â”‚
â”‚ â”‚     â”‚     â–ˆâ–ˆâ–ˆâ–ˆ                                          â”‚ â”‚
â”‚ â”‚ 800Kâ”‚     â–ˆâ–ˆâ–ˆâ–ˆ                                          â”‚ â”‚
â”‚ â”‚     â”‚     â–ˆâ–ˆâ–ˆâ–ˆ                                          â”‚ â”‚
â”‚ â”‚ 500Kâ”‚     â–ˆâ–ˆâ–ˆâ–ˆ                                          â”‚ â”‚
â”‚ â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚ â”‚
â”‚ â”‚        Year 1    Year 2    Year 3                      â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ [Chart Type â–¼] [Edit Colors] [Edit Labels] [Add Desc] â”‚ â”‚
â”‚ â”‚ [Hide Chart] [Delete]                                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**User Can Edit Chart:**

1. **Change Chart Type:**
   ```
   Click "Chart Type â–¼"
   Options: Bar Chart, Line Chart, Area Chart, Pie Chart
   ```

2. **Edit Colors:**
   ```
   Click "Edit Colors"
   Color Picker opens:
   - Year 1: [Blue] [Change]
   - Year 2: [Green] [Change]
   - Year 3: [Orange] [Change]
   - Background: [White] [Change]
   ```

3. **Edit Labels:**
   ```
   Click "Edit Labels"
   Dialog opens:
   - Chart Title: [Revenue Projections        ]
   - X-Axis Label: [Time Period]
   - Y-Axis Label: [Revenue (â‚¬)]
   - Legend Position: [Bottom â–¼]
   ```

4. **Add Description:**
   ```
   Click "Add Desc"
   Description field appears:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Chart Description:                                       â”‚
   â”‚ [This chart shows our revenue growth over 3 years...]   â”‚
   â”‚                                                          â”‚
   â”‚ [Save] [Cancel]                                         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

5. **Hide/Show Chart:**
   - Click "Hide Chart" â†’ Chart collapses (data preserved)
   - Click "Show Chart" â†’ Chart expands again

---

#### STEP 8: USER CAN CUSTOMIZE EVERYTHING

**Full Customization Options:**

```
User can:

1. Edit Table Values:
   - Click any cell â†’ Edit directly
   - Changes save automatically
   - KPIs recalculate automatically

2. Edit Table Structure:
   - Click "Edit Structure"
   - Add/remove rows/columns
   - Change time periods
   - Rename table

3. Add More Tables:
   - Click "ğŸ“Š Add Table" again
   - Create multiple tables (e.g., Revenue, Costs, Cash Flow)
   - Navigate between tables using tabs

4. Navigate Between Tables:
   - Previous/Next buttons
   - Table tabs: [Revenue] [Costs] [Cash Flow]
   - Keyboard shortcuts (Arrow keys)

5. Edit Chart:
   - Change chart type
   - Edit colors
   - Edit labels
   - Add description
   - Hide/show

6. Regenerate:
   - Click "âœ¨ Regenerate from Text"
   - AI re-reads updated text
   - Updates table (with confirmation)

7. Delete:
   - Delete table (removes chart too)
   - Delete chart only (keeps table)
```

---

### Complete Example: Switching from Market to Financial Section

**Scenario: User is in Market section (text-only or optional tables), then switches to Financial section (always needs tables)**

```
STEP 1: User is in "Market Opportunity" section
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Market Opportunity                                          â”‚
â”‚ Describe the market size, trends, and customer segments.  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Text Editor: "Our target market consists of..."
[User has written text, no tables created]

ğŸ“Š Tables & Charts section is visible (optional):
  [ğŸ“Š Add Table] [ğŸ“ˆ Add Chart] [ğŸ“· Add Image]
  (User can skip this - it's optional)
```

```
STEP 2: User clicks "06 Preliminary Financial Overview" tab
  â†“
Current section (Market) auto-saves
  â†“
New section (Financial) loads
```

```
STEP 3: Financial Section Loads
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Preliminary Financial Overview                             â”‚
â”‚ Provide high-level financial assumptions including costs,  â”‚
â”‚ revenue potential, and funding needed.                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Text Editor: (Empty or existing content)

[âœ¨ Generate with AI]  [ğŸ’¡ Smart Hints]  [â­ï¸ Skip]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Tables & Charts                                           â”‚
â”‚                                                             â”‚
â”‚ ğŸ’¡ This section typically includes financial tables.       â”‚
â”‚    Create tables to visualize your revenue, costs, and     â”‚
â”‚    cash flow projections.                                   â”‚
â”‚                                                             â”‚
â”‚ [ğŸ“Š Add Table] [ğŸ“ˆ Add Chart] [ğŸ“· Add Image]                 â”‚
â”‚                                                             â”‚
â”‚ (No tables created yet)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Difference:**
- **Market section:** Tables section is optional (user can skip)
- **Financial section:** Tables section appears immediately with helpful message explaining why tables are recommended

**User Flow:**
1. User writes text OR generates with AI
2. User sees Tables section with helpful description
3. User creates tables (Revenue, Costs, Cash Flow)
4. User fills tables with AI from text
5. Charts auto-generate
6. User customizes everything

### Section-Specific Examples

#### Financial Section (category: `financial`)

**Flow:**
```
1. User writes text: "Revenue: â‚¬500K Year 1, â‚¬1.2M Year 3. Costs: â‚¬200K Year 1..."
2. Tables section appears (always, because category = 'financial')
3. User creates: Revenue Table, Costs Table, Cash Flow Table
4. User clicks "âœ¨ Fill with AI from Text" on each table
5. AI extracts data and fills tables
6. Charts auto-generate: Revenue Bar Chart, Costs Bar Chart, Cash Flow Line Chart
7. User navigates between tables using tabs: [Revenue] [Costs] [Cash Flow]
```

#### Risk Section (category: `risk`)

**Flow:**
```
1. User writes text: "High risk: Market competition. Medium risk: Technology delays..."
2. Tables section appears (always, because category = 'risk')
3. User creates: Risk Matrix table
4. User clicks "âœ¨ Fill with AI from Text"
5. AI extracts risks, categorizes by impact/probability, fills matrix
6. Risk Matrix visualization auto-generates (heatmap)
7. User can edit risk ratings, add/remove risks
```

#### Market Section (category: `market`)

**Flow:**
```
1. User writes text: "Competitors: Company A (30% market share), Company B (25%)..."
2. Tables section appears (optional, user decides)
3. User can skip tables OR create Competitor Analysis table
4. If created: User clicks "âœ¨ Fill with AI from Text"
5. AI extracts competitor data, fills table
6. Pie chart auto-generates showing market share
```

#### Project Section (category: `project`)

**Flow:**
```
1. User writes text: "Milestone 1: Q1 2024 - MVP launch. Milestone 2: Q2 2024 - Beta..."
2. Tables section appears (always, because category = 'project')
3. User creates: Milestone Timeline table
4. User clicks "âœ¨ Fill with AI from Text"
5. AI extracts milestones, dates, dependencies, fills table
6. Gantt chart auto-generates showing project timeline
```

---

## Editing Flow: How Different Sections Work

### Flow Between Sections

**How it works:**
1. User clicks section tab at top â†’ Section loads
2. User edits content in text editor (or generates with AI)
3. If section needs tables â†’ Tables section appears
4. User creates and fills tables (with AI or manually)
5. User clicks another section tab â†’ Current section auto-saves, new section loads
6. All sections saved automatically

**Example:**
```
User clicks "02 Market Opportunity" tab
  â†“
Section loads: Title, Description, Editor, Smart Hints (with questions)
  â†“
User clicks "âœ¨ Generate with AI"
  â†“
AI generates complete section using all prompts + previous sections
  â†“
Content appears in editor
  â†“
User sees: "ğŸ“Š Tables & Charts" section (optional for market sections)
  â†“
User can create competitor table (optional) or skip
  â†“
User clicks "03 Project Description" tab
  â†“
Current section auto-saves
  â†“
New section loads: Title, Description, Editor
  â†“
Tables section appears (always, because category = 'project')
```

---

## Tables & Charts Flow: Connection to Text Editor

### The Connection Flow

**Step 1: User Writes Text**
```
Text Editor:
"Our revenue projections show strong growth over the next 3 years. 
We expect to reach â‚¬500,000 in Year 1, growing to â‚¬1.2 million 
by Year 3. Our main cost drivers include personnel, marketing, 
and technology infrastructure..."
```

**Step 2: Tables Appear (If Section Needs Them)**
```
ğŸ“Š Tables & Charts Section appears below editor
```

**Step 3: User Creates Table**
```
User clicks "ğŸ“Š Add Table"
  â†“
Table editor opens
  â†“
User creates: "Revenue Projections" table
  â†“
Table structure created (empty)
```

**Step 4: AI Fills Table from Text**
```
User clicks "âœ¨ Fill with AI from Text"
  â†“
AI reads text editor content
  â†“
AI extracts data: "â‚¬500,000 in Year 1, â‚¬1.2M by Year 3"
  â†“
AI fills table:
  Year 1: â‚¬500,000
  Year 2: â‚¬800,000
  Year 3: â‚¬1,200,000
```

**Step 5: Chart Auto-Generates**
```
Table filled
  â†“
Chart automatically generates from table data
  â†“
Bar chart shows revenue growth
```

**Step 6: User Can Edit**
```
User can:
- Edit table values manually
- Edit text editor (changes don't auto-update table)
- Click "âœ¨ Fill with AI from Text" again to regenerate
- Add more tables
- Navigate between tables
```

---

## Tables & Charts Navigation

### If Section Has Multiple Tables/Charts

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Tables & Charts                                                           â”‚
â”‚                                                                             â”‚
â”‚ Navigation: [â† Previous]  [Table 1 of 3]  [Next â†’]                          â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€ Revenue Table (Current) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [Table content]                                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚ All Tables: [Revenue] [Costs] [Cash Flow]  â† Click to jump                 â”‚
â”‚                                                                             â”‚
â”‚ [ğŸ“Š Add Table] [ğŸ“ˆ Add Chart]                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Navigation Options:**
1. **Previous/Next buttons** - Navigate sequentially
2. **Table tabs** - Click to jump to specific table
3. **Keyboard shortcuts** - Arrow keys to navigate

**Features:**
- Shows current table number (e.g., "Table 1 of 3")
- Quick jump to any table via tabs
- Smooth transitions between tables

---

## Customization: How Tables Connect to Text

### Connection Modes

**Mode 1: AI Auto-Fill (Recommended)**
```
Text Editor: "Revenue: â‚¬500K Year 1, â‚¬1.2M Year 3"
  â†“
User clicks "âœ¨ Fill with AI from Text"
  â†“
AI extracts and fills table
  â†“
Table and text stay in sync (user can edit either)
```

**Mode 2: Manual Entry**
```
User creates table
  â†“
User fills table manually
  â†“
Text editor and table are independent
  â†“
User can reference table in text: "See Revenue Table below"
```

**Mode 3: Two-Way Sync (Advanced)**
```
User edits text â†’ AI suggests table updates
User edits table â†’ AI suggests text updates
  â†“
Both stay connected (optional feature)
```

### Current Implementation

**Recommended:** Mode 1 (AI Auto-Fill)
- User writes text first
- AI fills tables from text when requested
- User can edit either independently
- Simple, clear, flexible

---

### 2. Text Editor

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Toolbar: [B] [I] [U] [â€¢ List] [1. List] [Link] [Image]                      â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚ [Rich text editor - Google Docs style]                                 â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚ Start writing your market opportunity...                               â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Rich text formatting toolbar
- Bold, italic, underline
- Bulleted list, numbered list
- Links, images
- Clean, minimal design

---

### 3. Action Buttons

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [âœ¨ Generate with AI]  [ğŸ’¡ Smart Hints]  [â­ï¸ Skip Section]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Buttons:**
- **Generate with AI** - Blue, primary button
- **Smart Hints** - Secondary button, toggles panel
- **Skip Section** - Tertiary button, marks as optional

---

### 4. ğŸ’¡ Smart Hints Panel

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¡ Smart Hints                                                              â”‚
â”‚                                                                             â”‚
â”‚ [Collapse â–²]                                                                â”‚
â”‚                                                                             â”‚
â”‚ ğŸ’¡ Who is the target market?                                               â”‚
â”‚ ğŸ’¡ How large is the market?                                                 â”‚
â”‚ ğŸ’¡ What trends support your opportunity?                                   â”‚
â”‚                                                                             â”‚
â”‚ [Use Questions as Guide]  [Insert All into Editor]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- **Collapsible panel** - Hidden by default, user can expand
- **Shows section prompts as questions** - From `sectionTemplate.prompts`
- **OPTIONAL guidance** - Questions are suggestions, not required
- **"Use Questions as Guide"** - Shows questions above editor as reference
- **"Insert All"** - Inserts all questions into editor as a starting template

**Important:**
- Questions are **NOT the default mode** - User always sees free text editor
- Questions are **optional hints** - User can ignore them completely
- AI uses ALL prompts as context when generating, even if user skips questions
- Smart Hints panel is **collapsed by default** - User can expand if they want guidance

---

### 5. ğŸ“Š Tables & Charts Section

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Tables & Charts                                                           â”‚
â”‚                                                                             â”‚
â”‚ Navigation: [â† Previous Table]  [Table 1 of 3]  [Next Table â†’]             â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€ Revenue Table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚ â”‚
â”‚ â”‚ â”‚ Item        â”‚ Year 1  â”‚ Year 2  â”‚                                  â”‚ â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                  â”‚ â”‚
â”‚ â”‚ â”‚ Product A   â”‚ [1000]  â”‚ [1500]  â”‚                                  â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚ Connected to text: "Our revenue projections show..."                  â”‚ â”‚
â”‚ â”‚ [âœ¨ Fill with AI from Text] [Edit] [Delete]                           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€ Revenue Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [Bar chart visualization - auto-generated from Revenue Table]           â”‚ â”‚
â”‚ â”‚ [Chart Type â–¼] [Edit] [Hide]                                           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚ [ğŸ“Š Add Table] [ğŸ“ˆ Add Chart] [ğŸ“· Add Image]                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Only shows if section needs tables/charts
- Each table in a card
- Charts auto-generated from tables
- **Navigation between tables** (if multiple tables)
- **Connection to text editor** - AI can fill tables from text content
- Add buttons at bottom

**Flow:**
1. User writes text in editor
2. Tables/charts appear below (if section needs them)
3. User can navigate between tables using Previous/Next
4. AI can fill tables from text content
5. Charts auto-generate from table data

---

## Alternative: Sidebar Layout (Optional)

If you prefer Requirements and AI Assistant on the side instead of header:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Main Editor          â”‚ Sidebar                                              â”‚
â”‚                     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ [Editor content]    â”‚ â”‚ ğŸ“‹ Requirements                                  â”‚   â”‚
â”‚                     â”‚ â”‚ 3 issues â€¢ 65% complete                         â”‚   â”‚
â”‚                     â”‚ â”‚ [View Details â†’]                                â”‚   â”‚
â”‚                     â”‚ â”‚                                                  â”‚   â”‚
â”‚                     â”‚ â”‚ ğŸ’¬ AI Assistant                                 â”‚   â”‚
â”‚                     â”‚ â”‚ [Start Chat â†’]                                  â”‚   â”‚
â”‚                     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Recommendation:** Header placement - Always visible, doesn't take editor space, cleaner design

---

## Header (With Requirements & AI Assistant)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Business Plan Editor  [ğŸ“‹ Requirements] [ğŸ’¬ AI Assistant]  [ğŸ‘ï¸ Preview]    â”‚
â”‚                                                                              â”‚
â”‚ â”Œâ”€ Program Selector â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                                        â”‚ â”‚
â”‚ â”‚ Product: [Strategy â–¼]  Route: [Grant â–¼]  Program: [FFG Basisprogramm â–¼]â”‚ â”‚
â”‚ â”‚                                                                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
- Title: "Business Plan Editor" (left aligned, large, bold)
- **Requirements button** (shows badge with issue count if any)
- **AI Assistant button** (always visible)
- Preview button (right aligned, icon only, clean design)
- **Program Selector** (below title, beautiful dropdown design)

**Button Design:**
- Requirements: `[ğŸ“‹ Requirements]` or `[ğŸ“‹ Requirements (3)]` if issues exist
- AI Assistant: `[ğŸ’¬ AI Assistant]`
- Both buttons: Clean, icon + text, hover effects
- Badge on Requirements button shows issue count

**Program Selector Design:**
- **Three dropdowns in a row:**
  - Product: Strategy / Review / Submission
  - Route: Grant / Loan / Equity / Visa
  - Program: FFG Basisprogramm / AWS Preseed / etc.
- **Visual Style:**
  - Clean dropdowns with icons
  - Hover effects
  - Selected state clearly visible
  - Responsive layout (stacks on mobile)
- **Styling:**
  - `bg-white border border-gray-300 rounded-lg px-4 py-2`
  - `hover:border-blue-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-200`
  - Dropdown arrow icon
  - Selected value highlighted

---

## Section Navigation Bar

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â†] [01 âœ“ Executive] [02 âš  Market] [03 â—‹ Project] ... [â†’]                 â”‚
â”‚                                                                             â”‚
â”‚ Overall: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 45% Complete (3 of 9 sections)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
- Scroll arrows (if many sections)
- Section tabs with status icons (âœ“ âš  â—‹)
- Active section highlighted (blue background, white text)
- Inactive sections (gray background, gray text)
- Progress bar below sections (blue fill, gray background)
- Section count (right side)
- **Color scheme:**
  - Active tab: `bg-blue-600 text-white`
  - Inactive tab: `bg-gray-100 text-gray-700 hover:bg-gray-200`
  - Progress bar: `bg-blue-500` (filled), `bg-gray-200` (background)

---

## Implementation Checklist

### Phase 1: Core Layout

- [ ] Header component (with preview button)
- [ ] Program selector (Product, Route, Program dropdowns)
- [ ] Section navigation bar (with progress)
- [ ] Main editor container
- [ ] Section header (title + description only)
- [ ] Text editor area
- [ ] Action buttons row

### Phase 2: Features

- [ ] ğŸ’¡ Smart Hints panel (collapsible)
- [ ] ğŸ“Š Tables & Charts section
- [ ] (Section navigation already handled by top navigation bar)

### Phase 3: Polish

- [ ] Rich text toolbar
- [ ] Formatting options
- [ ] Better table UI
- [ ] Chart visualizations
- [ ] Animations/transitions

---

## Component Structure

```
Editor.tsx
â”œâ”€â”€ Header.tsx
â”‚   â”œâ”€â”€ ProgramSelector.tsx (Product, Route, Program dropdowns)
â”‚   â”œâ”€â”€ RequirementsButton.tsx (with badge for issues)
â”‚   â”œâ”€â”€ AIAssistantButton.tsx
â”‚   â””â”€â”€ PreviewButton.tsx
â”œâ”€â”€ SectionNavigation.tsx
â”‚   â””â”€â”€ ProgressBar.tsx
â””â”€â”€ MainEditorArea.tsx
    â”œâ”€â”€ SectionHeader.tsx
    â”‚   â”œâ”€â”€ SectionTitle.tsx
    â”‚   â””â”€â”€ SectionDescription.tsx
    â”œâ”€â”€ TextEditor.tsx
    â”œâ”€â”€ ActionButtons.tsx
    â”œâ”€â”€ SmartHintsPanel.tsx
    â””â”€â”€ TablesChartsSection.tsx
```

---

## Key Design Principles

1. **Clean & Minimal** - No clutter, focus on writing
2. **Always Visible** - Section title, description, editor always shown
3. **Optional Features** - Smart Hints, Tables collapsible/conditional
4. **Clear Actions** - Big, obvious buttons
5. **Header Integration** - Requirements and AI Assistant in header, always visible
6. **One Editor Mode** - No confusing toggles, just one editor
7. **Visual Hierarchy** - Emojis for quick recognition (ğŸ’¡ Smart Hints, ğŸ“Š Tables)
8. **Beautiful Selectors** - Program selector with clean dropdowns
9. **Top Navigation** - Section tabs at top handle all navigation
10. **Card-Based Design** - Section header in card for visual separation

## Section Navigation - Already at Top!

**You're right!** Section navigation already exists at the top in the section navigation bar:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â†] [01 âœ“ Executive] [02 âš  Market] [03 â—‹ Project] ... [â†’]                 â”‚
â”‚                                                                              â”‚
â”‚ Overall Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 45% Complete (3 of 9 sections)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**This handles:**
- Click any section tab to jump to it
- Scroll arrows (â† â†’) if many sections
- Shows current section (highlighted)
- Shows progress for all sections

**No need for duplicate navigation in section header!** The top navigation bar is sufficient.

**Note:** We removed question-by-question mode. User always sees regular editor. Questions are shown as optional hints in Smart Hints panel.

---

## Summary: Complete Flow & Behavior

### Key Principles

1. **Questions are Optional**
   - Questions come from `sectionTemplate.prompts`
   - Shown in Smart Hints panel (collapsed by default)
   - User can skip them entirely
   - AI uses ALL prompts as context when generating (even if user skips)

2. **AI Generation is Comprehensive**
   - Always generates for the **entire section**, not just one question
   - Uses all prompts + previous sections + program requirements
   - Maintains consistency across sections
   - Has memory via conversation history

3. **Section Order Matters**
   - Sections have `order` field in templates
   - Recommended: Executive â†’ Market â†’ Business Model â†’ Financial â†’ Risk
   - AI references previous sections when generating new content

4. **Tables/Charts Based on Category**
   - `financial` â†’ Always needs tables (Revenue, Costs, Cash Flow)
   - `risk` â†’ Always needs tables (Risk Matrix)
   - `project` â†’ Always needs tables (Milestones)
   - `market` â†’ Maybe needs tables (Competitor Analysis, optional)
   - `team` â†’ Maybe needs tables (Hiring Timeline, optional)
   - `general` â†’ No tables (Executive Summary)

5. **Unified Flow Pattern**
   - User writes text OR generates with AI
   - If section needs tables â†’ Tables section appears
   - User creates table structure
   - AI fills table from text (when requested)
   - Chart auto-generates from table
   - User can customize everything

### Complete User Journey Example

```
1. User opens "Market Opportunity" section
   â†’ Smart Hints shows questions (collapsed by default)
   â†’ User can expand to see questions OR ignore them

2. User clicks "âœ¨ Generate with AI"
   â†’ AI uses ALL prompts as context (even if user didn't read them)
   â†’ AI also uses: Executive Summary content, Program requirements
   â†’ AI generates complete section

3. Content appears in editor
   â†’ User can edit, refine, or regenerate

4. Tables section appears (optional for market sections)
   â†’ User can create Competitor Analysis table (optional)
   â†’ OR skip tables entirely

5. User clicks "03 Project Description" tab
   â†’ Current section auto-saves
   â†’ New section loads
   â†’ Tables section appears (always, because category = 'project')

6. User writes text about milestones
   â†’ User creates Milestone Timeline table
   â†’ User clicks "âœ¨ Fill with AI from Text"
   â†’ AI extracts milestones, dates, fills table
   â†’ Gantt chart auto-generates

7. User navigates to Financial section
   â†’ AI references previous sections (Market, Project)
   â†’ User generates content with AI
   â†’ AI maintains consistency (e.g., uses same funding amount from Executive Summary)
   â†’ Tables section appears (always)
   â†’ User creates multiple tables (Revenue, Costs, Cash Flow)
   â†’ AI fills each table from text
   â†’ Charts auto-generate
```

---

---

## Quick Reference: Step-by-Step Flow Summary

### When User Switches Sections

**From Text-Only Section â†’ Section That Needs Tables:**
1. User clicks section tab â†’ Section loads
2. **Tables & Charts section appears immediately** (if category requires it)
3. User sees helpful message: "This section typically includes [table type]"
4. User can start writing text OR create tables first

**From Optional Tables Section â†’ Always-Needs-Tables Section:**
1. User was in Market section (optional tables, user skipped)
2. User clicks Financial section tab
3. **Tables section appears immediately** with different message
4. Message explains: "This section typically includes financial tables"
5. User understands tables are recommended (not optional)

### KPIs Explained

**What are KPIs?**
- Key Performance Indicators (calculated metrics)
- Examples: Revenue Growth %, Profit Margin %, Customer Acquisition Cost
- Only available for Financial tables
- User checks "Include KPIs" when creating table
- KPIs calculate automatically when table is filled

**Where do KPIs appear?**
- As additional rows in the table
- Or as separate KPI section below table
- Update automatically when table values change

### Step 4 Transition - What User Sees

**When Tables Section Appears:**
- **For Financial/Risk/Project sections:** Appears immediately when section loads
- **For Market/Team sections:** Appears after user writes text (optional)
- **For General sections:** Never appears

**What Description User Gets:**
- Financial: "This section typically includes financial tables. Create tables to visualize your revenue, costs, and cash flow projections."
- Risk: "This section typically includes a risk matrix. Create a matrix to visualize risk impact and probability."
- Project: "This section typically includes milestone timelines. Create a timeline to visualize your project schedule."
- Market: "You can optionally add competitor analysis tables. Tables help visualize market data."
- Team: "You can optionally add hiring timeline tables. Tables help visualize team growth."

### Step 6 Safety Features

**Why Step 6 is Safe:**
1. **Confirmation Dialog** - User must confirm before AI fills table
2. **Preview** - Shows text that will be analyzed
3. **Warning** - Clear message that existing data will be overwritten
4. **Cancel Option** - User can cancel at any time
5. **Manual Edit** - User can edit table after AI fills it
6. **Regenerate** - User can regenerate if text changes

### Step 7 Chart Editing - Full Capabilities

**User Can:**
- âœ… Change chart type (Bar, Line, Area, Pie, Gantt, Matrix)
- âœ… Edit colors (each data series, background)
- âœ… Edit labels (title, axis labels, legend)
- âœ… Add description (text below chart explaining the data)
- âœ… Hide/show chart (without deleting)
- âœ… Delete chart (keeps table)

**Chart Description:**
- User can add explanatory text below chart
- Helps explain what the chart shows
- Useful for reviewers/readers
- Saved with chart data

---

---

## Simplified Directory Structure - Everything Integrated

### Current Files Analysis (9 files)

```
features/editor/components/
â”œâ”€â”€ Editor.tsx (847 lines - main component) âš ï¸ NEEDS REFACTORING
â”œâ”€â”€ ProgramSelector.tsx (FULL PAGE wizard - NOT suitable for header) âš ï¸ NEED SIMPLE VERSION
â”œâ”€â”€ SimpleTextEditor.tsx âœ… CAN USE AS-IS (simple textarea editor)
â”œâ”€â”€ RequirementsModal.tsx âœ… CAN USE AS-IS (modal component)
â”œâ”€â”€ SectionContentRenderer.tsx âœ… CAN REUSE LOGIC (tables/charts rendering)
â”œâ”€â”€ DataChart.tsx âœ… CAN REUSE (chart component)
â”œâ”€â”€ FinancialAnalysis.tsx âœ… CAN REUSE (financial tables)
â”œâ”€â”€ ImageUpload.tsx âœ… CAN REUSE (image upload)
â””â”€â”€ StructuredFields.tsx âœ… CAN REUSE (structured fields)
```

### What We Can Integrate vs What We Need to Create

**âœ… CAN INTEGRATE (Use As-Is):**
1. **SimpleTextEditor.tsx** - Perfect simple textarea editor
2. **RequirementsModal.tsx** - Already works, just needs to be called
3. **SectionContentRenderer.tsx** - Can extract table/chart rendering logic
4. **DataChart.tsx** - Chart component
5. **FinancialAnalysis.tsx** - Financial tables
6. **ImageUpload.tsx** - Image upload
7. **StructuredFields.tsx** - Structured fields

**âš ï¸ NEEDS SIMPLE VERSION:**
1. **ProgramSelector.tsx** - Current is FULL PAGE wizard, need SIMPLE dropdown version for header

**ğŸ”„ SIMPLIFY & INTEGRATE:**
1. **Editor.tsx** - Keep header/navigation/content inline (organized sections)
2. **ProgramSelector.tsx** - Simplify to dropdowns only
3. **SectionContentRenderer.tsx** - Integrate DataChart, FinancialAnalysis, ImageUpload, StructuredFields

### Simplified Structure - No New Files, Just Reorganize

**Goal:** Keep everything in Editor.tsx, simplify ProgramSelector, integrate components.

```
features/editor/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Editor.tsx                    # Main component (header/nav/content all inline, organized)
â”‚   â”œâ”€â”€ ProgramSelector.tsx           # ğŸ”„ SIMPLIFIED: Just dropdowns (Product/Route/Program)
â”‚   â”œâ”€â”€ SimpleTextEditor.tsx          # âœ… USE AS-IS
â”‚   â”œâ”€â”€ RequirementsModal.tsx         # âœ… USE AS-IS
â”‚   â””â”€â”€ SectionContentRenderer.tsx    # ğŸ”„ INTEGRATED: Includes DataChart, FinancialAnalysis, ImageUpload, StructuredFields
â”‚
â”œâ”€â”€ engine/
â”‚   â”œâ”€â”€ aiHelper.ts
â”‚   â”œâ”€â”€ categoryConverters.ts
â”‚   â”œâ”€â”€ dataSource.ts
â”‚   â””â”€â”€ doctorDiagnostic.ts
â”‚
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useSectionProgress.ts
â”‚
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ tableInitializer.ts
â”‚
â”œâ”€â”€ types/
â”‚   â””â”€â”€ editor.ts
â”‚
â””â”€â”€ prompts/
    â””â”€â”€ sectionPrompts.ts
```

**Total: 5 component files (simplified from 9)**

**Key Changes:**
- **Editor.tsx** - Contains header, navigation, and content sections (organized with comments)
- **ProgramSelector.tsx** - Simplified to just 3 dropdowns (Product/Route/Program)
- **SectionContentRenderer.tsx** - Integrated all chart/table/image/field components
- **No new files** - Everything integrated into existing structure

### Implementation Plan

**Step 1: Simplify ProgramSelector.tsx**
- Remove full page wizard code
- Keep only 3 dropdowns (Product/Route/Program)
- Simple, clean component

**Step 2: Integrate Components into SectionContentRenderer.tsx**
- Move DataChart logic inline
- Move FinancialAnalysis logic inline
- Move ImageUpload logic inline
- Move StructuredFields logic inline
- Delete DataChart.tsx, FinancialAnalysis.tsx, ImageUpload.tsx, StructuredFields.tsx

**Step 3: Organize Editor.tsx**
- Add clear section comments: `// ========= HEADER =========`, `// ========= NAVIGATION =========`, `// ========= CONTENT =========`
- Keep all code inline but well-organized
- Use existing structure, just add organization

**Step 4: Test & Clean**
- Test all functionality
- Remove unused imports
- Clean up any dead code

### Final Structure

```
features/editor/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Editor.tsx                    # All inline (header/nav/content organized)
â”‚   â”œâ”€â”€ ProgramSelector.tsx           # Simple dropdowns only
â”‚   â”œâ”€â”€ SimpleTextEditor.tsx          # Text editor
â”‚   â”œâ”€â”€ RequirementsModal.tsx        # Requirements checker
â”‚   â””â”€â”€ SectionContentRenderer.tsx    # Integrated: Charts + Tables + Images + Fields
â”‚
â”œâ”€â”€ engine/                           # AI & data processing
â”œâ”€â”€ hooks/                            # React hooks
â”œâ”€â”€ utils/                            # Utilities
â”œâ”€â”€ types/                            # TypeScript types
â””â”€â”€ prompts/                          # AI prompts
```

**Total: 5 component files (down from 9)**

### Templates Organization

**Current:** `shared/templates/` (mixed: sections + documents)

**Recommended:** Split templates
- **Editor templates** â†’ `features/editor/templates/` (sections, templateKnowledge)
- **Shared templates** â†’ `shared/templates/` (documents only)

**What Editor Needs:**
- `sections.ts` - Master section templates (67KB)
- `templateKnowledge.ts` - Template knowledge (26KB)
- `types.ts` - SectionTemplate type (1.6KB)
- `index.ts` - getSections(), getTemplateKnowledge() (3KB)

**Total: ~97KB (mostly data, can't be reduced)**

See `docs/TEMPLATES_MIGRATION_PLAN.md` for full migration plan.

---

### Editor.tsx Structure (All Inline, Organized)

**Editor.tsx will contain everything inline with clear section comments:**

```tsx
// features/editor/components/Editor.tsx
export default function Editor({ programId, product = 'submission', route = 'grant' }: EditorProps) {
  // ========= STATE =========
  const [sections, setSections] = useState<PlanSection[]>([]);
  const [activeSection, setActiveSection] = useState(0);
  const [showRequirements, setShowRequirements] = useState(false);
  const [showAIAssistant, setShowAIAssistant] = useState(false);
  const [showSmartHints, setShowSmartHints] = useState(false);
  
  // ========= EFFECTS =========
  useEffect(() => { loadSections(); }, [programId, product, route]);
  
  // ========= HANDLERS =========
  const handleContentChange = (content: string) => { /* ... */ };
  const handleGenerateAI = () => { /* ... */ };
  
  if (isLoading) return <LoadingSpinner />;
  
  const currentSection = sections[activeSection];
  const progress = calculateSectionProgress(sections);
  
  return (
    <div className="min-h-screen bg-gray-50">
      {/* ========= HEADER ========= */}
      <header className="sticky top-0 z-50 bg-gradient-to-r from-blue-600 to-purple-600 shadow-lg">
        <div className="container mx-auto px-4 py-3">
          <div className="flex items-center justify-between mb-3">
            <h1 className="text-2xl font-bold text-white">Business Plan Editor</h1>
            <div className="flex gap-3">
              <button onClick={() => setShowRequirements(true)}>
                ğŸ“‹ Requirements {requirementsCount ? `(${requirementsCount})` : ''}
              </button>
              <button onClick={() => setShowAIAssistant(true)}>ğŸ’¬ AI Assistant</button>
              <button onClick={() => router.push('/preview')}>ğŸ‘ï¸ Preview</button>
            </div>
          </div>
          <div className="bg-white rounded-lg shadow-md p-4">
            <ProgramSelector 
              product={product}
              route={route}
              programId={programId}
              onProductChange={handleProductChange}
              onRouteChange={handleRouteChange}
              onProgramChange={handleProgramChange}
            />
          </div>
        </div>
      </header>
      
      {/* ========= SECTION NAVIGATION ========= */}
      <nav className="sticky top-[120px] z-40 bg-white border-b border-gray-200 shadow-sm">
        <div className="container mx-auto px-4 py-2">
          <div className="flex items-center gap-2 overflow-x-auto">
            {sections.map((section, index) => (
              <button
                key={section.key}
                onClick={() => setActiveSection(index)}
                className={`px-4 py-2 rounded-lg ${
                  index === activeSection ? 'bg-blue-600 text-white' : 'bg-gray-100'
                }`}
              >
                {String(index + 1).padStart(2, '0')} {section.title}
              </button>
            ))}
          </div>
          <div className="mt-3">
            <ProgressBar progress={progress} />
            <div className="text-sm text-gray-600 mt-1">
              {progress.percentage}% Complete ({progress.completed} of {progress.total})
            </div>
          </div>
        </div>
      </nav>
      
      {/* ========= MAIN EDITOR AREA ========= */}
      <main className="container mx-auto px-4 py-6 max-w-5xl">
        {currentSection && (
          <div className="space-y-6">
            {/* Section Header */}
            <div className="bg-white rounded-lg shadow-md border-t-4 border-blue-500 p-6">
              <h2 className="text-2xl font-bold text-gray-900 mb-2">{currentSection.title}</h2>
              <p className="text-gray-600">{template.description}</p>
            </div>
            
            {/* Text Editor */}
            <div className="bg-white rounded-lg shadow-md p-6">
              <SimpleTextEditor 
                content={currentSection.content}
                onChange={(content) => handleContentChange(currentSection.key, content)}
              />
            </div>
            
            {/* Action Buttons */}
            <div className="flex gap-3">
              <button onClick={handleGenerateAI}>âœ¨ Generate with AI</button>
              <button onClick={() => setShowSmartHints(!showSmartHints)}>ğŸ’¡ Smart Hints</button>
              <button onClick={handleSkip}>â­ï¸ Skip Section</button>
            </div>
            
            {/* Smart Hints Panel */}
            {showSmartHints && prompts && (
              <SmartHintsPanel prompts={prompts} />
            )}
            
            {/* Tables & Charts */}
            <SectionContentRenderer
              section={currentSection}
              template={template}
              onTableChange={handleTableChange}
              onChartTypeChange={handleChartTypeChange}
            />
          </div>
        )}
      </main>
      
      {/* ========= MODALS ========= */}
      <RequirementsModal 
        isOpen={showRequirements}
        onClose={() => setShowRequirements(false)}
      />
    </div>
  );
}
```

### ProgramSelector.tsx (Simplified)

**Update existing ProgramSelector.tsx to just dropdowns:**

```tsx
// features/editor/components/ProgramSelector.tsx
interface ProgramSelectorProps {
  product: string;
  route: string;
  programId?: string;
  onProductChange: (product: string) => void;
  onRouteChange: (route: string) => void;
  onProgramChange: (programId: string) => void;
  availablePrograms?: Array<{ id: string; name: string }>;
}

export default function ProgramSelector({
  product,
  route,
  programId,
  onProductChange,
  onRouteChange,
  onProgramChange,
  availablePrograms = []
}: ProgramSelectorProps) {
  return (
    <div className="flex items-center gap-4">
      <div className="flex items-center gap-2">
        <span className="text-sm text-gray-600">ğŸ¯ Product:</span>
        <select value={product} onChange={(e) => onProductChange(e.target.value)}>
          <option value="strategy">Strategy</option>
          <option value="review">Review</option>
          <option value="submission">Submission</option>
        </select>
      </div>
      <div className="flex items-center gap-2">
        <span className="text-sm text-gray-600">ğŸ›£ï¸ Route:</span>
        <select value={route} onChange={(e) => onRouteChange(e.target.value)}>
          <option value="grant">Grant</option>
          <option value="loan">Loan</option>
          <option value="equity">Equity</option>
          <option value="visa">Visa</option>
        </select>
      </div>
      <div className="flex items-center gap-2">
        <span className="text-sm text-gray-600">ğŸ“‹ Program:</span>
        <select value={programId || ''} onChange={(e) => onProgramChange(e.target.value)}>
          <option value="">Select Program</option>
          {availablePrograms.map(program => (
            <option key={program.id} value={program.id}>{program.name}</option>
          ))}
        </select>
      </div>
    </div>
  );
}
```

### SectionContentRenderer.tsx (Integrated)

**Integrate DataChart, FinancialAnalysis, ImageUpload, StructuredFields into SectionContentRenderer.tsx:**
- Move all chart rendering logic inline
- Move financial analysis calculations inline
- Move image upload UI inline
- Move structured fields UI inline
- Delete separate component files after integration

---

**Status:** Ready for Implementation - Minimal Structure, Layout First

